import React, {useState,useEffect} from 'react'
import Head from 'next/head'
import Image from 'next/image'
import AlignItems from '../lib/AlignItems'
import Button from '../lib/Button'
import Footer from '../lib/Footer'
import styles from '../styles/Home.module.css'
import logo from '../public/sg-banner-logo.png'
import PostThumbNail from '../lib/PostThumbNail'

import { useRouter } from 'next/router'

import { VscChevronRight,VscAccount,VscLinkExternal,VscAdd,VscHeart,VscLocation,VscMegaphone,VscBook,VscSignOut,VscSignIn } from "react-icons/vsc";

import {app,analytics,auth,db} from '../firebase'
import { getAuth } from 'firebase/auth';
import { useAuthState, useSignInWithGoogle } from 'react-firebase-hooks/auth';
import LoadingBar from 'react-top-loading-bar';

export default function Home() {
  const router = useRouter();

  const [signInWithGoogle] = useSignInWithGoogle(auth);
  const [user, loading, error] = useAuthState(auth);
  const [progress, setProgress] = useState(0);

  useEffect(() => {
    if (user) {
      setProgress(100);
    }
  }, [user])
  
  return (
    <div
      className={'pagePadding'}
    >
      <Head>
        <title>SEIRYO GROUND</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <div
        style={{
          display: 'flex',
          alignItems: 'flex-start',
          gap:'1.5em'
        }}
      >
        <section
          style={{
            // maxWidth: '350px',
            // minWidth: '250px',
            width:'400px',
            position: 'sticky',
            top: '0px',
            display: 'flex',
            height: '100vh',
            flexDirection: 'column',
            justifyContent:'space-between',
            // paddingTop: '5%'
            // borderRight: '1px solid black'
          }}
        >
          <div
            style={{
              display: 'grid',
              gridTemplateColumns: '1fr',
            }}
          >
            {!user &&            
              <div
                style={{
                  padding:'1.5em 0'
                }}
              >
                {/* <Image
                  src={logo}
                  width="290"
                  height="100"
                /> */}
                <h1
                  className="seiryoGroundFont"
                  style={{
                    letterSpacing:'-6px',
                    lineHeight:'0.9em',
                    margin:0
                  }}
                >
                  SEIRYO<br/>GROUND
                </h1>
              </div>
            }
            {user ?
              <>
                <Button
                  iconPosition={'right'}
                  icon={<VscAdd/>}
                  onClick={()=>signInWithGoogle()}
                >
                  場所を追加
                </Button>
                <Button
                  icon={<VscHeart/>}
                  iconPosition={'right'}
                >
                  好きな場所
                </Button>
              </>:
              <Button
                iconPosition={'right'}
                icon={<VscSignIn/>}
                onClick={()=>signInWithGoogle()}
              >
                 GOOGLEでログイン
              </Button>
            }
            <Button
              iconPosition={'right'}
              icon={<VscLocation/>}
              onClick={()=>router.push('/place')}
            >
              場所を探す
            </Button>
            <Button
              iconPosition={'right'}
              icon={<VscMegaphone/>}
              onClick={()=>router.push('/news')}
            >
              SG NEWS
            </Button>
            <Button
              iconPosition={'right'}
              icon={<VscBook/>}
              onClick={()=>router.push('/about')}
            >
              SEIRYO GROUNDについて
            </Button>
            <Button
              iconPosition={'right'}
              icon={<VscLinkExternal/>}
              onClick={()=>router.push('/about')}
            >
              GITHUBを開く
            </Button>
            {user && 
              <Button
                iconPosition={'right'}
                icon={<VscSignOut/>}
                onClick={()=>signInWithGoogle()}
              >
                ログアウト
              </Button>
            }
          </div>
          <div
            style={{
              display: 'grid',
              gridTemplateColumns:'1fr',
              padding: '0.5em'
            }}
          >
            {user ? 
              <div style={{padding:'0em',backgroundColor: 'white'}}>
                <AlignItems gap={'1em'}>
                  <img src={user.photoURL} width="40" height="40" style={{borderRadius: '0px'}}/>
                  <h3 style={{color:'black'}}>{user.displayName}</h3>
                </AlignItems>
              </div>:            
              <p>
                外を歩き回り、今までいって良かった場所を一箇所にまとめた場所。カードをクリックして頂くと詳細やレビューを見ることができます。
              </p>
            }
            <Footer></Footer>
          </div>
        </section>
        <section
          style={{
            display: 'grid',
            gridTemplateColumns: '1fr',
            width: '100%',
            // padding: '7% 0',
            // margin:0
          }}
        >
          {user ?
            <div
              style={{
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
              }}
            >
              <h2
                style={{
                  writingMode:'vertical-rl',
                  textOrientation:'mixed'
                }}
              >
                追加した場所はありません
                <br/>
                No places created by you
              </h2>
            </div>:
            <>
            <div
              style={{
                background: 'linear-gradient(90deg, #ECFC8D 0%, #91FB5F 100%)',
                color: 'black',
                width: '100%',
                height: '80vh'
              }}
            >
            </div>
            <h2 style={{height: '20vh'}}>
              Trees. Green. Creating our O2
              <br/>
              植物。緑。我々の酸素を。
            </h2>
            <div
              style={{
                background: 'linear-gradient(90deg, #8DFCE8 0%, #5FC3FB 100%)',
                color: 'black',
                width: '100%',
                height: '80vh'
              }}
            >
            </div>
            <h2 style={{height: '20vh'}}>Oceans. Blue. Borders<br/>海。青。境目</h2>
            </>
          }
        </section>
      </div>
    </div>
  )
}
